% calc_vacm1G_mmp.m% Function: used within batchprocess4G_mmp to read and convert%   vacm data to m/s.  Written for mmp3 carrying NBIS acm.%	Input: drop,mmpid,cruise,procdata, pr_scan, ss (sound speed)%	Output: vac(1:nscan,1:2), pr_vac% M.Gregg, 13jul96; revised jun-2000 by Dave Wif (drop_flag==1 | drop_flag==2) & strcmp(mmpid,'mmp3')   va_fil = [procdata filesep cruise filesep 'vac' filesep 'vac' int2str(drop) '.mat'];   vac=NaN*ones(nscans,2); pr_vac=[];      if drop_flag==2 & exist(va_fil)==2 % jun-2000 revision      load(va_fil); % retrieve existing ACM data   else      % compute ACM measurements      for i=1:2         ch=['vac' int2str(i)];         %         % Read & apply the algorithm         algorithm=read_algorithm_mmp(ch,drop);         x_str=['vac(:,i)=' algorithm '_mmp(ch,drop,ss);'];         eval(x_str)         % Every scan has two samples each of vac1,vac2; vac1_mmp.m         % averages these pairs to yield one sample per scan (for each axis)      end            pr_vac=pr_offset1_mmp(drop,'vac',pr_scan);      %% Save ACM data      save(va_fil, 'pr_vac', 'vac')   end      clear va_fil x_str algorithmend