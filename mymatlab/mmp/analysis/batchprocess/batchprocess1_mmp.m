% mmp:batchprocess:batchprocess1_mmp%		Calls m-scripts and functions to process a list of drops.%	Before executing: %		1. Save droplist.mat as a column vector in this folder%		2. Set up cruise subfolder under MMP on large disk %		 	accessible from this program. Processed data goes there.%		3. Create timeplace.mat in cruise folder.  Read%			write_droptime1_mmp.m for format.%		4. Edit MMP:mmpdatabase to include drops being processed%		5. Edit MATLAB:mmp:mmpfolders to define source of raw data%			and destination of processed data%		6. Execute set_mmp_paths so needed scripts can be found%		7. Check and edit adjustable parameters below.%          a. If low epsilon's are expected, set eps_step so lowest%             wavenumber is 0.5 cpm or less%%	Files written are:%		1. MMP:<cruise>:timeplace.mat is updated with year & yday of drop%		2. MMP:<cruise>:thetasd:thetasd<drop>.mat%		3. MMP:<cruise>:eps:eps<drop>.mat%		4. MMP:<cruise>:chi:chi<drop>.mat%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%		more=1;while more==1	clear all	clf	[drop,more]=getdrop_mmp;	% adjustable parameters	start_scan=2;     	   % first scan to keep (scan 1 is bad for SeaBird data)	cond_shift=1;     	   % no of scans to shift csbe forward & remove from end of 						   % other ch	eps_step=512; 	  	   % number of samples per epsilon & estimate.	tcp_fc=3;			   % cutoff freq for low-pass filter applied to temp,cond,pr	chi_step=eps_step;	   % number of samples per chi estimate	proc_cond='yes'; 	   % set to 'no' for fresh water, no pump, or no conductivity 	displ_shear_spec='no'; % plot each af shear spec with universal overlay	save_eps_spec='yes';   % save all Pshear spec	displ_chi_spec='no';   % plot each th volt spec on screen	save_chi_spec='no';    % save all Ptgrad spec	%	% parameters fixed by data structure	FS_hf=400; 		  % sample rate of high-frequency channels	FS_lf=25;		  % sample rate of low-frequency channels	hfperscan=16; 	  % number of samples per scan in high-freq channels	%	% secondary parameters	dt_hf=1/FS_hf; 	  % sample period of high-frequency channels	scans_per_eps=fix(eps_step/hfperscan); % # scans per eps estimate	df=FS_hf/eps_step; % elementary frequency bandwidth	f=(df:df:df*eps_step/2)'; % frequency vector for spectra	%	% constants	G=9.80655;	global G	Sa=1; % volt per g of accelerometers	%	%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%	mmpfolders; 				% brings in path names of key directories	msg=['drop=' int2str(drop)]; disp(msg)	drop_flag=1; 			% continue processing while drop_flag==1	get_dropinfo1_mmp 		% gets & keeps mmpid, cruise, scanid, voffsetid for drop	                  		%   then loads & keeps offset_ch where ch is v1,v2, etc.		write_droptime1_mmp		% reads year and yday from raw hdr and updates cruise:timeplace.mat		calc_prscan1_mmp		% reads & converts pressure, keeps prscan							%   sets & keeps direction='up' or 'down'	calc_thetasd1_mmp		% calcs salinity, theta, sigtheta, saves thetasd<drop>.mat							%   keeps pr_thetasd temp salinity	setup_epschi1_mmp		% sets up windows for eps & chi. calcs & keeps							% cntr_scan, pr_eps, t, s, w, kvis, ktemp 	calc_eps1_mmp			%	calc_tl1_mmp			% calcs & saves tl1V & tref at cntr of chi windows							%   fits & saves polyfit & rms residual of tref to tl1V	calc_chi1_mmp			% calcs & saves 		%plot_profiles1_mmp	%pause(20)end %%%%%%%%%%% end of droplist while loop %%%%%%%%%%%%%